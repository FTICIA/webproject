<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시스템 아키텍처 플로우차트</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .mermaid {
            overflow: auto;
        }
        .controls {
            margin: 20px 0;
            text-align: center;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>시스템 아키텍처 플로우차트</h1>
        
        <div class="controls">
            <button id="zoomIn">확대 (+)</button>
            <button id="zoomOut">축소 (-)</button>
            <button id="resetZoom">원래 크기로</button>
        </div>

        <div class="mermaid">
flowchart TD
    %% Main Waterfall Model Stages
    Requirements[요구사항 분석] --> Design[설계]
    Design --> Implementation[구현]
    Implementation --> Verification[검증]
    Verification --> Maintenance[유지보수]
    
    %% Requirements Phase
    subgraph RequirementsPhase[요구사항 분석 단계]
        Client[클라이언트 애플리케이션] --> SecurityReq[보안 요구사항]
        Client --> ChatbotReq[AI 챗봇 요구사항]
        Client --> BlockchainReq[블록체인 요구사항]
        Client --> MicroserviceReq[마이크로서비스 요구사항]
        Client --> FluidSecurityReq[유체역학 보안 요구사항]
        Client --> FluidMedicalReq[유체역학 의료 요구사항]
        Client --> MultiPhysicsReq[다중물리 통합 요구사항]
        Client --> SQLReq[SQL 데이터베이스 요구사항]
        Client --> LoadBalancingReq[로드 밸런싱 요구사항]
        
        %% Navier-Stokes specific requirements
        FluidSecurityReq --> NavierStokesReq[나비에-스톡스 방정식 요구사항]
        NavierStokesReq --> VorticityAnalysisReq[와도 분석 요구사항]
        NavierStokesReq --> FluidPatternReq[유체 패턴 인식 요구사항]
        NavierStokesReq --> TurbulenceDetectionReq[난류 감지 요구사항]
        NavierStokesReq --> AnomalyDetectionReq[이상 패턴 감지 요구사항]
        
        %% Expand key medical requirements
        FluidMedicalReq --> DrugFlowReq[약물 흐름 분석]
        FluidMedicalReq --> DrugInteractionReq[약물 상호작용 모델링]
        FluidMedicalReq --> CardiovascularRiskReq[심혈관 질환 위험 예측]
        FluidMedicalReq --> DrugDeliveryReq[약물 전달 시스템 효율성]
        
        %% Expand SQL & Load Balancing requirements
        SQLReq --> MedicalDataStorageReq[의료 데이터 저장 요구사항]
        SQLReq --> QueryPerformanceReq[쿼리 성능 요구사항]
        SQLReq --> DataIntegrityReq[데이터 무결성 요구사항]
        
        LoadBalancingReq --> HighAvailabilityReq[고가용성 요구사항]
        LoadBalancingReq --> ScalabilityReq[확장성 요구사항]
        LoadBalancingReq --> TrafficDistributionReq[트래픽 분산 요구사항]
    end
    
    %% Design Phase
    subgraph DesignPhase[설계 단계]
        %% Architecture Design
        ThreeTierDesign[3계층 아키텍처 설계]
        MicroserviceArchDesign[마이크로서비스 아키텍처 설계]
        
        %% Navier-Stokes Design
        subgraph navierStokesDesign[나비에-스톡스 시스템 설계]
            NavierStokesSimDesign[나비에-스톡스 시뮬레이션 설계]
            VorticityAnalysisDesign[와도 분석 설계]
            BoundingServiceDesign[바운딩 서비스 설계]
            GridCellDesign[그리드 셀 설계]
            FluidVectorDesign[유체 벡터 설계]
            FluidPatternDesign[유체 패턴 인식 설계]
            
            NavierStokesSimDesign --> SimulationParametersDesign[시뮬레이션 매개변수 설계]
            NavierStokesSimDesign --> ImplicitSolverDesign[내재적 해법 설계]
            VorticityAnalysisDesign --> AnomalyDetectionDesign[이상 감지 알고리즘 설계]
            FluidPatternDesign --> PatternMatchingDesign[패턴 매칭 알고리즘 설계]
        end
        
        %% SQL Database Design
        subgraph sqlDesign[SQL 데이터베이스 설계]
            MedicalSQLDesign[의료 SQL 데이터베이스 설계]
            ShardingDesign[데이터베이스 샤딩 설계]
            ReplicationDesign[데이터베이스 복제 설계]
            QueryOptimizationDesign[쿼리 최적화 설계]
            
            MedicalSQLDesign --> DrugTableDesign[약물 테이블 설계]
            MedicalSQLDesign --> PatientTableDesign[환자 테이블 설계]
            MedicalSQLDesign --> InteractionTableDesign[상호작용 테이블 설계]
            MedicalSQLDesign --> FluidSimulationResultTableDesign[유체 시뮬레이션 결과 테이블 설계]
        end
        
        %% Load Balancing Design
        subgraph loadBalancingDesign[로드 밸런싱 설계]
            LoadBalancerDesign[로드 밸런서 설계]
            AutoScalingDesign[오토스케일링 설계]
            HealthCheckDesign[헬스 체크 설계]
            FailoverDesign[장애 조치 설계]
            
            LoadBalancerDesign --> AlgorithmSelectionDesign[알고리즘 선택 설계]
            LoadBalancerDesign --> SessionPersistenceDesign[세션 지속성 설계]
        end
        
        %% Front-end Security Design
        subgraph frontendSecurityDesign[프론트엔드 보안 설계]
            WAFDesign[웹 애플리케이션 방화벽 설계]
            CSPDesign[컨텐츠 보안 정책 설계]
            InputValidationDesign[입력값 검증 필터 설계]
            RateLimitingDesign[요청 속도 제한 설계]
            CSRFProtectionDesign[CSRF 방지 토큰 설계]
            TLSEnforcementDesign[TLS/HTTPS 강제 적용 설계]
            SecureCookieDesign[보안 쿠키 관리 설계]
            ClientEncryptionDesign[클라이언트 암호화 설계]
            MFADesign[다중 인증 계층 설계]
            CodeObfuscationDesign[코드 난독화 계층 설계]
        end
        
        %% Specific System Designs
        subgraph fluidMedicalDesign[유체역학 기반 의료 시스템 설계]
            DrugDeliverySystemDesign[약물 전달 시스템 설계]
            CardiovascularDesign[심혈관 시스템 설계]
            MultiPhysicsDesign[다중물리 통합 설계]
            MedicalDeviceDesign[의료기기 설계]
            ComputationalMethodsDesign[전산 방법론 설계]
            MedicalDatabaseDesign[의료 데이터베이스 설계]
            MedicalApplicationDesign[의료 응용 설계]
            
            %% Key mathematical models
            DrugDeliverySystemDesign --> EnhancedPoiseuilleLawDesign[확장 포아죄유 법칙 설계]
            MultiPhysicsDesign --> SystemHamiltonianDesign[시스템 해밀토니안 설계]
            CardiovascularDesign --> OscillatoryShearDesign[진동 전단 지수 설계]
            MedicalDatabaseDesign --> DrugInteractionDesign[약물 상호작용 설계]
        end
        
        %% Chatbot Design (medical integration)
        subgraph chatbotDesign[AI 챗봇 시스템 설계]
            MedicalResponseDesign[의료 응답 생성 설계]
            FluidEquationIntegration[유체역학 수식 통합 설계]
            
            FluidEquationIntegration --> EnhancedPoiseuilleIntegration[확장 포아죄유 통합]
            FluidEquationIntegration --> SystemHamiltonianIntegration[시스템 해밀토니안 통합]
            FluidEquationIntegration --> OSIIntegration[진동 전단 지수 통합]
            FluidEquationIntegration --> NavierStokesIntegration[나비에-스톡스 통합]
        end
        
        %% Blockchain for medical data
        subgraph blockchainDesign[블록체인 시스템 설계]
            MedicalBlockchainDesign[의료 블록체인 설계]
            MedicalBlockchainDesign --> PrescriptionLedgerDesign[처방전 원장 설계]
            MedicalBlockchainDesign --> DrugTraceabilityDesign[약물 추적성 설계]
        end
        
        %% Connect SQL and Load Balancing to other designs
        MedicalDatabaseDesign --> MedicalSQLDesign
        MicroserviceArchDesign --> LoadBalancerDesign
        MedicalApplicationDesign --> LoadBalancerDesign
        ComputationalMethodsDesign --> NavierStokesSimDesign
    end
    
    %% Implementation Phase
    subgraph ImplementationPhase[구현 단계]
        %% Navier-Stokes Implementation
        navierStokesImplement[나비에-스톡스 시스템 구현]
        navierStokesImplement --> SimulationServiceImpl[시뮬레이션 서비스 구현]
        navierStokesImplement --> VorticityAnalysisImpl[와도 분석 서비스 구현]
        navierStokesImplement --> BoundingServiceImpl[바운딩 서비스 구현]
        navierStokesImplement --> GridCellModelImpl[그리드 셀 모델 구현]
        navierStokesImplement --> FluidPatternMatchingImpl[유체 패턴 매칭 구현]
        
        SimulationServiceImpl --> VelocityFieldImpl[속도 필드 계산 구현]
        SimulationServiceImpl --> AdvectionImpl[이류 계산 구현]
        SimulationServiceImpl --> DiffusionImpl[확산 계산 구현]
        SimulationServiceImpl --> ViscosityImpl[점성 효과 구현]
        
        %% Medical Fluid Dynamics Implementation
        fluidMedicalImplement[유체역학 기반 의료 시스템 구현]
        fluidMedicalImplement --> DrugDeliverySystemImpl[약물 전달 시스템 구현]
        fluidMedicalImplement --> CardiovascularSystemImpl[심혈관 시스템 구현]
        fluidMedicalImplement --> MultiPhysicsSystemImpl[다중물리 시스템 구현]
        fluidMedicalImplement --> MedicalDatabaseImpl[약물 DB 구현]
        fluidMedicalImplement --> MedicalApplicationImpl[의료 응용 구현]
        
        %% SQL Implementation
        sqlImplement[SQL 데이터베이스 구현]
        sqlImplement --> SchemaImplementation[스키마 구현]
        sqlImplement --> IndexImplementation[인덱스 구현]
        sqlImplement --> StoredProcedureImplementation[저장 프로시저 구현]
        sqlImplement --> TriggerImplementation[트리거 구현]
        sqlImplement --> ShardingImplementation[샤딩 구현]
        sqlImplement --> ReplicationImplementation[복제 구현]
        sqlImplement --> EncryptionImplementation[데이터베이스 암호화 구현]
        
        %% Load Balancing Implementation
        loadBalancingImplement[로드 밸런싱 구현]
        loadBalancingImplement --> LoadBalancerImplementation[로드 밸런서 구현]
        loadBalancingImplement --> AutoScalingImplementation[오토스케일링 구현]
        loadBalancingImplement --> HealthCheckImplementation[헬스 체크 구현]
        loadBalancingImplement --> FailoverImplementation[장애 조치 구현]
        
        %% Frontend Security Implementation
        frontendSecurityImplement[프론트엔드 보안 구현]
        frontendSecurityImplement --> WAFImplementation[웹 애플리케이션 방화벽 구현]
        frontendSecurityImplement --> CSPImplementation[컨텐츠 보안 정책 구현]
        frontendSecurityImplement --> TLSImplementation[TLS/HTTPS 강제 적용 구현]
        frontendSecurityImplement --> MFAImplementation[다중 인증 계층 구현]
        
        %% Core equation implementations
        DrugDeliverySystemImpl --> EnhancedPoiseuilleLawImpl[확장 포아죄유 법칙 구현]
        DrugDeliverySystemImpl --> ConvectionDiffusionReactionImpl[대류-확산-반응 구현]
        MultiPhysicsSystemImpl --> SystemHamiltonianImpl[시스템 해밀토니안 구현]
        CardiovascularSystemImpl --> OscillatoryShearImpl[진동 전단 지수 구현]
        MultiPhysicsSystemImpl --> NavierStokesEquationsImpl[나비에-스톡스 방정식 구현]
        
        %% AI Integration
        chatbotImplement[AI 챗봇 시스템 구현]
        chatbotImplement --> MedicalResponseImpl[의료 응답 생성 구현]
        chatbotImplement --> FluidEquationIntegrationImpl[유체역학 수식 통합 구현]
        
        %% Blockchain Implementation
        blockchainImplement[블록체인 구현]
        blockchainImplement --> MedicalBlockchainImpl[의료 블록체인 구현]
        
        %% Connect database implementation
        MedicalDatabaseImpl --> sqlImplement
        %% Connect load balancing with application
        MedicalApplicationImpl --> loadBalancingImplement
    end
    
    %% Verification Phase
    subgraph VerificationPhase[검증 단계]
        SystemTest[시스템 테스트]
        SystemTest --> FluidMedicalTest[유체역학 기반 의료 시스템 테스트]
        SystemTest --> MedicalAccuracyTest[의료 정확도 테스트]
        SystemTest --> EquationTest[방정식 구현 테스트]
        SystemTest --> SQLTest[SQL 데이터베이스 테스트]
        SystemTest --> LoadBalancingTest[로드 밸런싱 테스트]
        SystemTest --> NavierStokesTest[나비에-스톡스 시스템 테스트]
        
        NavierStokesTest --> SimulationAccuracyTest[시뮬레이션 정확도 테스트]
        NavierStokesTest --> VorticityAnalysisTest[와도 분석 테스트]
        NavierStokesTest --> AnomalyDetectionTest[이상 감지 테스트]
        NavierStokesTest --> ScalabilityTest[확장성 테스트]
        NavierStokesTest --> PerformanceTest[성능 테스트]
        
        FluidMedicalTest --> DrugDeliverySystemTest[약물 전달 시스템 테스트]
        FluidMedicalTest --> CardiovascularSystemTest[심혈관 시스템 테스트]
        FluidMedicalTest --> DrugRecommendationTest[약물 추천 알고리즘 테스트]
        
        EquationTest --> EnhancedPoiseuilleEqTest[확장 포아죄유 방정식 테스트]
        EquationTest --> SystemHamiltonianEqTest[시스템 해밀토니안 테스트]
        EquationTest --> OSIEquationTest[진동 전단 지수 테스트]
        EquationTest --> NavierStokesEqTest[나비에-스톡스 방정식 테스트]
        
        SQLTest --> QueryPerformanceTest[쿼리 성능 테스트]
        SQLTest --> DataIntegrityTest[데이터 무결성 테스트]
        SQLTest --> ReplicationTest[복제 테스트]
        SQLTest --> ShardingTest[샤딩 테스트]
        SQLTest --> EncryptionTest[암호화 테스트]
        
        LoadBalancingTest --> HighAvailabilityTest[고가용성 테스트]
        LoadBalancingTest --> ScalabilityTest[확장성 테스트]
        LoadBalancingTest --> FailoverTest[장애 조치 테스트]
        LoadBalancingTest --> PerformanceTest[성능 테스트]
    end
    
    %% Maintenance Phase
    subgraph MaintenancePhase[유지보수 단계]
        FluidMedicalMaintenance[유체역학 기반 의료 시스템 유지보수]
        EquationModelManagement[방정식 모델 관리]
        ModelManagement[AI 모델 관리]
        MedicalDBMaint[약물 DB 유지보수]
        SQLMaintenance[SQL 데이터베이스 유지보수]
        LoadBalancingMaintenance[로드 밸런싱 유지보수]
        NavierStokesMaintenance[나비에-스톡스 시스템 유지보수]
        
        NavierStokesMaintenance --> SimulationServiceMaint[시뮬레이션 서비스 유지보수]
        NavierStokesMaintenance --> VorticityAnalysisMaint[와도 분석 서비스 유지보수]
        NavierStokesMaintenance --> PatternDatasetMaint[패턴 데이터셋 유지보수]
        NavierStokesMaintenance --> AnomalyDetectionMaint[이상 감지 알고리즘 유지보수]
        
        FluidMedicalMaintenance --> DrugDeliverySystemMaint[약물 전달 시스템 유지보수]
        FluidMedicalMaintenance --> CardiovascularSystemMaint[심혈관 시스템 유지보수]
        
        EquationModelManagement --> EnhancedPoiseuilleEqMaint[확장 포아죄유 방정식 관리]
        EquationModelManagement --> SystemHamiltonianEqMaint[시스템 해밀토니안 관리]
        EquationModelManagement --> OSIEquationMaint[진동 전단 지수 관리]
        EquationModelManagement --> NavierStokesEqMaint[나비에-스톡스 방정식 관리]
        
        SQLMaintenance --> DatabaseOptimizationMaint[데이터베이스 최적화]
        SQLMaintenance --> QueryOptimizationMaint[쿼리 최적화]
        SQLMaintenance --> IndexManagementMaint[인덱스 관리]
        SQLMaintenance --> CapacityPlanningMaint[용량 계획]
        SQLMaintenance --> EncryptionKeyRotationMaint[암호화 키 교체]
        
        LoadBalancingMaintenance --> ConfigurationUpdateMaint[구성 업데이트]
        LoadBalancingMaintenance --> ScalingPolicyMaint[스케일링 정책 관리]
        LoadBalancingMaintenance --> PerformanceMonitoringMaint[성능 모니터링]
        
        MedicalDBMaint --> NewDrugAdditionMaint[신약 추가 유지보수]
        MedicalDBMaint --> InteractionRuleUpdateMaint[상호작용 규칙 업데이트]
        MedicalDBMaint --> SQLMaintenance
    end
    
    %% Styling
    classDef phaseHeader fill:#5D4037,stroke:#fff,stroke-width:1px,color:#fff;
    classDef requirements fill:#1976D2,stroke:#fff,stroke-width:1px,color:#fff;
    classDef design fill:#388E3C,stroke:#fff,stroke-width:1px,color:#fff;
    classDef implementation fill:#D32F2F,stroke:#fff,stroke-width:1px,color:#fff;
    classDef verification fill:#7B1FA2,stroke:#fff,stroke-width:1px,color:#fff;
    classDef maintenance fill:#F57C00,stroke:#fff,stroke-width:1px,color:#fff;
    classDef fluidmedical fill:#E91E63,stroke:#fff,stroke-width:1px,color:#fff;
    classDef sql fill:#0097A7,stroke:#fff,stroke-width:1px,color:#fff;
    classDef loadbalancing fill:#FFC107,stroke:#333,stroke-width:1px,color:#333;
    classDef navierstokes fill:#9C27B0,stroke:#fff,stroke-width:1px,color:#fff;
    classDef security fill:#FF5722,stroke:#fff,stroke-width:1px,color:#fff;
    
    class Requirements,Design,Implementation,Verification,Maintenance phaseHeader;
    class RequirementsPhase,Client,FluidMedicalReq,DrugFlowReq,DrugInteractionReq,CardiovascularRiskReq,DrugDeliveryReq,SQLReq,LoadBalancingReq requirements;
    class DesignPhase,fluidMedicalDesign,DrugDeliverySystemDesign,CardiovascularDesign,MultiPhysicsDesign,EnhancedPoiseuilleLawDesign,SystemHamiltonianDesign,OscillatoryShearDesign design;
    class ImplementationPhase,fluidMedicalImplement,DrugDeliverySystemImpl,CardiovascularSystemImpl,MultiPhysicsSystemImpl,EnhancedPoiseuilleLawImpl,SystemHamiltonianImpl,OscillatoryShearImpl implementation;
    class VerificationPhase,FluidMedicalTest,EquationTest,DrugDeliverySystemTest,CardiovascularSystemTest,EnhancedPoiseuilleEqTest,SystemHamiltonianEqTest,OSIEquationTest verification;
    class MaintenancePhase,FluidMedicalMaintenance,EquationModelManagement,DrugDeliverySystemMaint,EnhancedPoiseuilleEqMaint,SystemHamiltonianEqMaint,OSIEquationMaint maintenance;
    class fluidMedicalDesign,DrugDeliverySystemDesign,CardiovascularDesign,MultiPhysicsDesign,MedicalDeviceDesign,ComputationalMethodsDesign,MedicalDatabaseDesign,MedicalApplicationDesign,EnhancedPoiseuilleLawDesign,SystemHamiltonianDesign,OscillatoryShearDesign,DrugInteractionDesign fluidmedical;
    class sqlDesign,MedicalSQLDesign,SchemaImplementation,IndexImplementation,StoredProcedureImplementation,TriggerImplementation,ShardingImplementation,ReplicationImplementation,SQLTest,SQLMaintenance,EncryptionImplementation,EncryptionTest,EncryptionKeyRotationMaint sql;
    class loadBalancingDesign,LoadBalancerDesign,AutoScalingDesign,LoadBalancingTest,LoadBalancingMaintenance loadbalancing;
    class NavierStokesReq,VorticityAnalysisReq,FluidPatternReq,TurbulenceDetectionReq,AnomalyDetectionReq,navierStokesDesign,NavierStokesSimDesign,VorticityAnalysisDesign,BoundingServiceDesign,GridCellDesign,FluidVectorDesign,FluidPatternDesign,navierStokesImplement,SimulationServiceImpl,VorticityAnalysisImpl,BoundingServiceImpl,GridCellModelImpl,FluidPatternMatchingImpl,NavierStokesTest,VorticityAnalysisTest,AnomalyDetectionTest,NavierStokesEqTest,NavierStokesMaintenance,SimulationServiceMaint,VorticityAnalysisMaint,PatternDatasetMaint,AnomalyDetectionMaint,NavierStokesEqMaint navierstokes;
    class frontendSecurityDesign,WAFDesign,CSPDesign,InputValidationDesign,RateLimitingDesign,CSRFProtectionDesign,TLSEnforcementDesign,SecureCookieDesign,ClientEncryptionDesign,MFADesign,CodeObfuscationDesign,frontendSecurityImplement,WAFImplementation,CSPImplementation,TLSImplementation,MFAImplementation security;
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true
            }
        });

        // Wait for the diagram to be rendered
        document.addEventListener('DOMContentLoaded', function() {
            // Get the SVG element after Mermaid has rendered it
            setTimeout(function() {
                const svg = document.querySelector('.mermaid svg');
                if (svg) {
                    // Set initial scale
                    let scale = 1;
                    const scaleStep = 0.1;
                    const minScale = 0.5;
                    const maxScale = 2;

                    // Zoom functions
                    document.getElementById('zoomIn').addEventListener('click', function() {
                        if (scale < maxScale) {
                            scale += scaleStep;
                            updateScale();
                        }
                    });

                    document.getElementById('zoomOut').addEventListener('click', function() {
                        if (scale > minScale) {
                            scale -= scaleStep;
                            updateScale();
                        }
                    });

                    document.getElementById('resetZoom').addEventListener('click', function() {
                        scale = 1;
                        updateScale();
                    });

                    function updateScale() {
                        svg.style.transform = `scale(${scale})`;
                        svg.style.transformOrigin = 'top left';
                    }
                }
            }, 1000); // Give Mermaid time to render
        });
    </script>
</body>
</html>